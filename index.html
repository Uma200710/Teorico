<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulador Práctico — Opciones (Pseudocódigo, Variables, etc.)</title>
  <style>
    body { font-family: sans-serif; background: #1a1f2d; color: #eef1fa; margin: 0; padding: 20px; }
    .container { max-width: 900px; margin: 0 auto; }
    .topic { background: #22304b; padding: 18px; border-radius: 8px; margin-bottom: 20px; }
    .question { margin-top: 12px; padding: 14px; background: #2d3b60; border-radius: 6px; }
    .option { margin-top: 8px; }
    .btn { background: #38bdf8; border: none; padding: 10px 14px; border-radius: 6px; color: #012; cursor: pointer; }
    .feedback { margin-top: 10px; font-size: 0.9em; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Simulador Parcial Práctico — Modo Opciones</h1>

    <div id="topicArea" class="topic">
      <h2 id="topicTitle">Tema 1</h2>
      <p id="topicText">Aquí va la explicación breve con pseudocódigo o definiciones del tema.</p>
    </div>

    <div id="questionArea"></div>

    <div style="margin-top: 20px">
      <button id="btn-prev" class="btn">◀ Tema anterior</button>
      <button id="btn-next" class="btn">Siguiente tema ▶</button>
      <button id="btn-generate" class="btn">Generar 10 preguntas aleatorias</button>
      <button id="btn-submit" class="btn">Corregir intento</button>
    </div>

    <div id="result" style="margin-top: 20px; font-size: 1.1em;"></div>
  </div>

  <script>
    const topics = [
      {
        id: 'pseudoc',
        title: 'Pseudocódigo y estructuras de control',
        text: 'Mientras (condición al inicio), Repetir...Hasta (condición al final), Para (contador con paso)...',
        q: [
          { q: '¿Qué valor tendrá i después de: Para i <- 2 Hasta 8 Con Paso 2?', opts: ['2,4,6,8','2,3,4,5,6,7,8','2,4,6','2,6,8'], ans: 0 },
          { q: '¿Cuál es la ventaja de usar Repetir…Hasta que en pseudocódigo?', opts: ['Se ejecuta al menos una vez','Nunca se ejecuta','Es más rápido','Es más difícil de escribir'], ans: 0 },
          { q: 'La estructura “Segun … Hacer” en pseudocódigo permite:', opts: ['Dos opciones máximo','Numerosas alternativas','Solo una alternativa','No tiene alternativas'], ans: 1 }
        ]
      },
      {
        id: 'memoria',
        title: 'Memoria: particiones y fragmentación',
        text: 'Particiones fijas / dinámicas, fragmentación interna / externa, segmentación.',
        q: [
          { q: '¿Qué ocurre si un proceso ocupa menos memoria que la partición asignada?', opts: ['Fragmentación externa','Fragmentación interna','Se libera la partición','Nada'], ans: 1 },
          { q: '¿Qué tipo de particionamiento genera fragmentación externa?', opts: ['Fijo','Dinámico','Segmentación perfecta','Particionado estático'], ans: 1 },
          { q: 'La segmentación ayuda al dividir un proceso en segmentos según:', opts: ['Tamaño fijo','Bloques contiguos','Segmentos lógicos (código, datos, pila)','Saltos de red'], ans: 2 }
        ]
      },

      {
        id: 'procesos',
        title: 'Procesos y planificación de CPU',
        text: 'Estados de procesos: listo, ejecución, bloqueado. Algoritmos: FIFO, SJF, RR, SRTF.',
        q: [
          { q: '¿Cuál algoritmo es expropiativo?', opts: ['FIFO','SJF','SRTF','FCFS'], ans: 2 },
          { q: '¿Qué significa “quantum” en Round Robin?', opts: ['Tamaño de memoria','Tiempo asignado a cada proceso','Número de procesos','Tamaño del disco'], ans: 1 },
          { q: '¿Qué problema puede ocurrir con SJF?', opts: ['Inanición de procesos largos','Uso excesivo de memoria','Fragmentación externa','Bucle infinito'], ans: 0 }
        ]
      },

      // Podés agregar también temas de E/S y Redes hechos igual
    ];

    let ti = 0; // topic index
    let currentAttempt = []; // array de preguntas para intento

    function renderTopic() {
      const t = topics[ti];
      document.getElementById('topicTitle').textContent = t.title;
      document.getElementById('topicText').textContent = t.text;
      document.getElementById('questionArea').innerHTML = '';
      document.getElementById('result').textContent = '';
    }

    document.getElementById('btn-prev').onclick = () => {
      if (ti > 0) ti--;
      renderTopic();
    };
    document.getElementById('btn-next').onclick = () => {
      if (ti < topics.length - 1) ti++;
      renderTopic();
    };

    document.getElementById('btn-generate').onclick = () => {
      const allQs = [];
      topics.forEach(t => t.q.forEach(q => allQs.push(q)));
      // barajar
      for (let i = allQs.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [allQs[i], allQs[j]] = [allQs[j], allQs[i]];
      }
      currentAttempt = allQs.slice(0, 10);
      renderAttempt();
    };

    function renderAttempt() {
      let html = '';
      currentAttempt.forEach((qq, idx) => {
        html += `<div class="question"><strong>${idx+1}. ${qq.q}</strong>`;
        qq.opts.forEach((opt, j) => {
          html += `<div class="option"><label><input type="radio" name="aq${idx}" value="${j}"> ${opt}</label></div>`;
        });
        html += `<div id="fb${idx}" class="feedback"></div></div>`;
      });
      document.getElementById('questionArea').innerHTML = html;
      document.getElementById('result').textContent = '';
    }

    document.getElementById('btn-submit').onclick = (e) => {
      e.preventDefault();
      let correct = 0;
      currentAttempt.forEach((qq, idx) => {
        const sel = document.querySelector(`input[name=aq${idx}]:checked`);
        const fb = document.getElementById('fb'+idx);
        if (!sel) {
          fb.textContent = 'No respondió.';
        } else if (parseInt(sel.value) === qq.ans) {
          fb.textContent = '✅ Correcto.';
          correct++;
        } else {
          fb.textContent = '❌ Incorrecto.';
        }
      });
      const percent = Math.round((correct / currentAttempt.length) * 100);
      document.getElementById('result').textContent = `Puntaje: ${correct}/${currentAttempt.length} → ${percent}%`;
    };

    // Inicial
    renderTopic();
  </script>
</body>
</html>
